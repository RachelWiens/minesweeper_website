function Minesweeper(a,b,c){this.boardHeight=a;this.boardLength=b;this.numMines=c;this.board=new Board(this.boardHeight,this.boardLength,this.numMines);this.minefield=[];this.shuffleMines()}Minesweeper.prototype.newGame=function(){shuffleMines()};Minesweeper.prototype.beginnerGame=function(){return new Minesweeper(10,10,20)};Minesweeper.prototype.intermediateGame=function(){return new Minesweeper(25,25,125)};Minesweeper.prototype.getBoard=function(){return this.board.getBoard()};
Minesweeper.prototype.getBoardLength=function(){return this.boardLength};Minesweeper.prototype.getBoardHeight=function(){return this.boardHeight};Minesweeper.prototype.shuffleMines=function(){this.board.clearBoard();for(var a=0;a<boardHeight;a++)for(var b=0;b<boardLength;b++)this.minefield[a][b]=!1;for(var c=0;c<this.numMines;)a=Math.random()*this.boardLength,b=Math.random()*this.boardHeight,this.minefield[a][b]||(this.minefield[a][b]=!0,c++)};
Minesweeper.prototype.flag=function(a,b){var c=this.board.getTile(a,b);c==Tile.TileEnum.UNKNOWN?this.board.setTile(a,b,Tile.TileEnum.FLAGGED):c==Tile.TileEnum.FLAGGED&&this.board.setTile(a,b,Tile.TileEnum.UNKNOWN)};Minesweeper.prototype.isGameWon=function(){for(var a=0;a<this.boardHeight;a++)for(var b=0;b<this.boardLength;b++)if(this.board.getTile(a,b)==Tile.TileEnum.UNKNOWN&&0==this.minefield[a][b])return!1;return!0};
Minesweeper.prototype.revealTile=function(a,b){if(this.minefield[a][b])this.board.setTile(a,b,Tile.TileEnum.MINE);else{for(var c=0,d=-1;2>d;d++)for(var e=-1;2>e;e++)0<=a+d&&a+d<this.boardHeight&&0<=b+e&&b+e<this.boardLength&&this.minefield[a+d][b+e]&&c++;this.board.setTile(a,b,Tile.getTile(this.numMines))}};
Minesweeper.prototype.revealNeighbours=function(a,b){for(var c=-1;2>c;c++)for(var d=-1;2>d;d++)0<=a+c&&a+c<this.boardHeight&&0<=b+d&&b+d<this.boardLength&&this.board.getTile(a+c,b+d)==Tile.TileEnum.UNKNOWN&&(this.revealTile(a+c,b+d),this.board.getTile(a+c,b+d)==Tile.TileEnum.EMPTY&&this.revealNeighbours(a+c,b+d))};
Minesweeper.prototype.makeMove=function(a,b){if(0>a||0>b||a>this.boardHeight||b>this.boardLength||this.board.getTile(a,b)!=Tile.TileEnum.UNKNOWN)return!0;this.revealTile(a,b);if(this.board.getTile(a,b)==Tile.TileEnum.MINE)return!1;this.board.getTile(a,b)==Tile.TileEnum.EMPTY&&this.revealNeighbours(a,b);return!this.isGameWon()};
